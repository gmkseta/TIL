

## VPC 

#### CIDR

* IP 주소와 넷 마스크 숫자로 구성되어있음
* 192.168.0.0/32 - 192.168.0.0 임 ,
* 192.168.0.0/24 면 - 2^(32-24) 개의 ip 주고
* 192.168.0.0/24 는 192.168.0.0~192.168.1.255
* 이 CIDR 블록을 가진 VPC 에서의 인스턴스는 192.168.0.127 이라는 내부 IP를 할당 받을 수 있음
* 인터넷 ip와 문제가 될 수 있으니 사설 대역망을 사용한다 - 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16
* 기본 VPC CIDR 블록은 172.1.0.0/16 - 
* 기존 CIDR블록 변경은 불가능하지만 이미 만들어져있는 VPC에 추가는 가능함

#### Subnet

* VPC는 한번 더 CIDR블록을 가지는 형태로 나눠진다.
* 리소스가 사용되는 물리적인 가용존과 연결된다.
* VPC는 놀리적인 범위고, 서브넷은 그 안에서 실제로 리소스가 생성 될 수 있는 네트워크임
* 리소스 생성 시 VPC만 지정하지 않고 서브넷을 모두 지정하며, 서브넷만 지정해도 VPC는 유추됨
* 가용존을 고려해서 적절한 크기의 서브넷들을 가용존 수만큼 생성해서 쓴다.
* N가용존 만큼 서브넷을 만들어 리소스를 분산하면 재해 대응 측면에서 유리하다.
* 서브넷의 넷 마스크 범위는 16(65535개) 에서 28(16개)를 사용할 수 있으면 VPC CIDR블럭 범위에 속하는 CIDR블록을 지정할 수 있다.
* 하나의 서브넷은 하나의 가용존과 연결됨
* 리전에 따라서 사용 가능한 가용존의 갯수는 다르다.
* 가용존 만큼 서브넷을 나누는 경우 특정 리전에서 사용 가능한 가용존의 갯수를 미리 확인 할 필요가 있다.
* 모든 가용존을 사용하는게 아니더라도 2개 이상을 사용하는게 일반적이다.
* 기본 VPC에서는 가용존 갯수만큼 넷 마스크 20의 서브넷들을 자동적으로 생성한다.

#### Route Table

* 서브넷과 연결 되어있는 리소스이다. 서브넷에서 네트워크를 쓸떄 이 테이블을 사용해서 목적지를 찾는다.
* 서브넷과 연결되지만 VPC를 생성할 때 만들어지고 VPC에도 ㄱ연결 되어있음.
* VPC에 속한 서브넷을 만들때 기본 라우트 테이블로 사용된다?
* 하나의 라우트 테이블은 VPC에 속한 다수의 서브넷에서 사용 가능하다.
* 자동 생성되는 라우트테이블은 한가지 룰만 정의되어있다.
* VPC의 CIDR 블럭을 목적지로 하는 경우는 local이 타겟인 규칙임

#### IGW

* VPC는 기본적으로 격리되어있는 네트워크 환경이다. 따라서 인터넷 못씀
* 인터넷  게이트 웨이가 필요하고, 인터넷 게이트웨이를 향하는 규칙을 추가하면 특정 서브넷이 인터넷과 연결됨.
* 연결 되는것 만으로는 못쓰고 리소스에 퍼블릭 ip를 할당 해줘야함

#### DHCP

* TCP/IP 상에서 호스트로 정보를 전달하는 DHCP표준입 - 네임서버 도메인네임 NTP서버 , NetBIOS서버 등의 정보를 설정 할 수 있음 . 
* 일반적으로 VPC 생성시 만들어지는 옵션셋을 그대로 사용함

#### Network ACL / SG

* 가상의 방화벽임

* N ACL 은 다수의 서브넷에서 재사용 할 수 있음 - 서브넷 앞단에서 트래픽을 제어함
* SG는 인스턴스 앞에서 트레픽을 제어함



* DNS Resolution

  * DNS Host name 을 IP로 해석할 때 AWS에서 제공하는 DNS 서버를 사용하는 기능임
  * 기본 활성화

* DNS hostnames

  * 내부에서 생성되는 인스턴스에 퍼블릭 DNS 호스트 네임을 할당해주는 기능임
  * 기본 비활성화임 - CDK 는 기본 활성화?

  

서브넷이 리소스에 물리적인 위치를 정해주게 되는건가? 가용존별로 서브넷을 만든다고들 하는데 

해당하는 가용존에서 재해같은게 발생 했을때 문제를 위해서 인거 아닌가.



자동으로 서브넷 pv / pb 로 가용존 별로 만들어주는거같은데 어떤 뜻인닞







